<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Product | Magpie Arts</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@900&family=Roboto+Serif:opsz,wght@8..144,700&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Candara', Arial, sans-serif;
      background: hsl(220, 100%, 98%);
      color: hsl(220, 10%, 10%);
      margin: 0; min-height: 100vh; padding: 0 0 80px 0;
    }
    .product-container {
      max-width: 900px; margin: 60px auto 40px auto; background: #fff;
      border-radius: 20px; box-shadow: 0 6px 34px #d7e0f7cc;
      padding: 32px 24px; display: flex; flex-wrap: wrap; gap: 34px;
      align-items: flex-start;justify-content:center;
    }
    .product-image {
      width: 333px; max-width: 90vw; border-radius: 18px;
      box-shadow: 0 4px 24px #b5e7fe50;
      overflow: hidden; aspect-ratio: 9/12; background: #e7f3fa;
      display: block;
    }
    .product-details {
      flex: 1 1 275px; min-width: 260px;
      display: flex; flex-direction: column;
    }
    .product-title {
      font-size: 2.05rem; font-weight: 900; color: #1d388b; font-family: 'Montserrat', 'Candara', Arial, sans-serif;
      margin-bottom: 7px;
    }
    .product-price {
      color: #eb4e3a; font-size: 1.2rem; font-weight: 800; margin-bottom: 17px;
    }
    .product-category {
      display: inline-block; font-size: 1.05rem; font-weight: 700;
      border-radius: 8px; background: #e8f4fe; color: #3975c7; padding: 5px 13px; margin-bottom: 14px;
    }
    .product-desc {
      font-size: 1.08rem; line-height: 1.7; color: #2c355a; margin-bottom: 17px;white-space:pre-line;
    }
    /* Add-to-cart & wishlist styles can be extended as needed! */
    @media (max-width: 820px) {
      .product-container {
        flex-direction: column; align-items: center; gap: 20px; padding: 15vw 4vw 5vw 4vw;
      }
      .product-details { width: 100%; min-width: 0; padding: 0;}
      .product-title { font-size: 1.32rem; }
      .product-image { width: 90vw; }
    }
  </style>
</head>
<body>
  <main>
    <section class="product-container" id="productContainer">
      <div>Loading product...</div>
    </section>
  </main>
  <script>
    // Utility: Parses ?index=1 from URL and returns the index as an integer
    function getProductIndex() {
      const urlParams = new URLSearchParams(window.location.search);
      return parseInt(urlParams.get('index'), 10);
    }
    // Fetch products.json, find the product, and render
    async function loadProduct() {
      const index = getProductIndex();
      try {
        const response = await fetch('https://raw.githubusercontent.com/magpieartsinfo/magpie-arts-site/main/products.json');
        if (!response.ok) throw new Error('Failed to load data');
        const products = await response.json();
        if (!products[index]) {
          document.getElementById('productContainer').innerHTML = "<div style='color:red;'>Product Not Found.</div>";
          return;
        }
        renderProduct(products[index]);
      } catch(err) {
        document.getElementById('productContainer').innerHTML = "<div style='color:red;'>Error loading product data.<br>" + err.message + "</div>";
      }
    }
    // Render the product details
    function renderProduct(product) {
      let prices = [];
      if (product.priceS1C16) prices.push("S1C16: ₹" + product.priceS1C16);
      if (product.priceS1C20) prices.push("S1C20: ₹" + product.priceS1C20);
      if (product.priceS2C20) prices.push("S2C20: ₹" + product.priceS2C20);
      if (product.priceS2C24) prices.push("S2C24: ₹" + product.priceS2C24);
      document.getElementById('productContainer').innerHTML = `
        <img class="product-image" src="${product.image}" alt="${product.title}" />
        <div class="product-details">
          <div class="product-title">${product.title}</div>
          <div class="product-category">${product.category || ''}</div>
          <div class="product-desc">${product.description || ''}</div>
          <div class="product-price">
            <strong>Price:</strong> ${prices.length > 0 ? prices.join("<br>") : "Contact for price"}
          </div>
        </div>
      `;
    }
    loadProduct();
  </script>
</body>
</html>
